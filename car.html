<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Car Details — DrivingTrust</title>

<style>
  body { font-family: Arial; margin:0; background:#f5f5f5; padding-bottom:80px; }
  .container { max-width:900px; margin:auto; padding:20px; }

  .big-img {
    width:100%; height:420px;
    object-fit:cover; border-radius:10px;
  }

  .thumbs {
    display:flex; margin-top:10px;
  }
  .thumbs img {
    width:120px; height:90px;
    object-fit:cover;
    border-radius:6px; margin-right:10px;
    cursor:pointer; border:2px solid transparent;
    transition:0.2s;
  }
  .thumbs img:hover {
    border:2px solid #003a75;
  }

  .title { font-size:26px; font-weight:bold; margin:20px 0 10px; color:#003a75; }
  .section { background:white; padding:18px; border-radius:10px; margin-top:20px; box-shadow:0 3px 12px rgba(0,0,0,0.06); }

  .row { font-size:16px; margin:6px 0; }
  .price { font-size:30px; color:#27ae60; margin-top:10px; }
</style>

</head>
<body>
<div class="container">

  <img id="big-img" class="big-img" src="">

  <div id="thumb-container" class="thumbs"></div>

  <div class="title" id="title"></div>
  <div class="price" id="price"></div>

  <div class="section" id="info"></div>

</div>

<script>
function getId() {
  const u = new URLSearchParams(location.search);
  return u.get("id");
}

async function load() {
  const id = getId();
  const res = await fetch("/api/getCar?id=" + id);
  const car = await res.json();

  document.getElementById("title").innerText = car.car;
  document.getElementById("price").innerText = "$" + car.price;

  const info = document.getElementById("info");
  info.innerHTML = `
    <div class="row">Seller: ${car.name}</div>
    <div class="row">Phone: ${car.phone}</div>
    <div class="row">City: ${car.city}</div>
    <div class="row">Mileage: ${car.mileage} km</div>
    <div class="row">Accident: ${car.accident}</div>
    <div class="row">Inspection: ${car.inspection}</div>
    <div class="row">Notes: ${car.notes || "N/A"}</div>
  `;

  // 图片显示
  const imgs = car.images || [];
  const big = document.getElementById("big-img");
  const thumbContainer = document.getElementById("thumb-container");

  if (imgs.length > 0) {
    big.src = imgs[0];

    imgs.forEach(url => {
      const img = document.createElement("img");
      img.src = url;
      img.onclick = () => big.src = url;
      thumbContainer.appendChild(img);
    });
  } else {
    big.src = "https://placehold.co/800x500?text=No+Image";
  }
}

load();
</script>

</body>
</html>
