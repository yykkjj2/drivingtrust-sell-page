<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Car Details</title>
  <style>
    body { font-family: Arial; padding: 20px; line-height: 1.6; }
  </style>
</head>
<body>

<h1>Car Details</h1>
<div id="details">Loading...</div>

<script>
  function getQueryParam(name) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(name);
  }

  async function loadCar() {
    const id = getQueryParam("id");
    if (!id) {
      document.getElementById("details").innerHTML = "No car ID provided.";
      return;
    }

    const res = await fetch("/api/getCar?id=" + id);
    const data = await res.json();

    if (!data) {
      document.getElementById("details").innerHTML = "Car not found.";
      return;
    }

    const car = data;
    document.getElementById("details").innerHTML = `
      <h2>${car.car}</h2>
      <p><strong>Seller:</strong> ${car.name} (${car.phone})</p>
      <p><strong>City:</strong> ${car.city}</p>
      <p><strong>Mileage:</strong> ${car.mileage}</p>
      <p><strong>Accident:</strong> ${car.accident}</p>
      <p><strong>Inspection:</strong> ${car.inspection}</p>
      <p><strong>Price:</strong> ${car.price}</p>
      <p><strong>Notes:</strong> ${car.notes}</p>
    `;
  }

  loadCar();
</script>

</body>
</html>
