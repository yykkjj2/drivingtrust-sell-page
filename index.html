<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DrivingTrust ‚Äî Trusted C2C Car Marketplace</title>

  <style>
    :root {
      --dt-primary: #0b4ee6;
      --dt-primary-soft: #e4ecff;
      --dt-secondary: #11b395;
      --dt-bg: #f3f6fb;
      --dt-text-main: #111827;
      --dt-text-sub: #6b7280;
      --dt-card-radius: 16px;
      --dt-shadow: 0 18px 45px rgba(15, 23, 42, 0.18);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Arial,sans-serif;
      background: radial-gradient(circle at top left,#e3edff,#f9fafb 40%,#eef2ff 100%);
      color: var(--dt-text-main);
    }

    a {
      text-decoration: none;
      color: inherit;
    }

    /* NAVBAR */
    .navbar {
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(18px);
      background: linear-gradient(to right, rgba(255,255,255,0.96), rgba(244,246,255,0.96));
      border-bottom: 1px solid rgba(148, 163, 184, 0.35);
    }
    .nav-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 12px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }
    .nav-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .nav-logo {
      width: 36px;
      height: 36px;
      border-radius: 12px;
      background: radial-gradient(circle at 20% 20%, #5ee7ff, #0b4ee6 50%, #020617 100%);
      display:flex;
      align-items:center;
      justify-content:center;
      color:#fff;
      font-weight:700;
      font-size:18px;
      box-shadow: 0 12px 30px rgba(15,23,42,0.35);
    }
    .nav-brand-text {
      display:flex;
      flex-direction:column;
    }
    .nav-brand-title {
      font-size: 20px;
      font-weight: 700;
      color: #0b1120;
    }
    .nav-brand-sub {
      font-size: 11px;
      color: var(--dt-text-sub);
    }

    .nav-right {
      display:flex;
      align-items:center;
      gap:16px;
      font-size: 14px;
      font-weight: 500;
    }
    .nav-link {
      padding: 6px 10px;
      border-radius: 999px;
      color: var(--dt-text-sub);
    }
    .nav-link:hover {
      background: rgba(148, 163, 184, 0.16);
      color: #020617;
    }
    .nav-link-primary {
      padding: 7px 16px;
      border-radius: 999px;
      background: linear-gradient(135deg,#0b4ee6,#2563eb);
      color: #fff;
      box-shadow: 0 12px 26px rgba(37, 99, 235, 0.45);
    }
    .nav-link-primary:hover {
      filter: brightness(1.05);
      transform: translateY(-1px);
    }

    /* HERO + SEARCH */
    .hero-wrap {
      max-width: 1200px;
      margin: 26px auto 30px;
      padding: 0 18px;
    }
    .hero {
      display:grid;
      grid-template-columns: minmax(0, 3.2fr) minmax(0, 2.6fr);
      gap: 30px;
      align-items:center;
    }
    .hero-text h1 {
      font-size: 34px;
      line-height: 1.15;
      margin: 0 0 12px;
      color:#020617;
    }
    .hero-highlight {
      background: linear-gradient(120deg,#0b4ee6,#11b395);
      -webkit-background-clip: text;
      color: transparent;
    }
    .hero-text p {
      margin:0;
      font-size:15px;
      color:var(--dt-text-sub);
      max-width:520px;
    }
    .hero-badges {
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top:18px;
    }
    .hero-badge {
      font-size:11px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.55);
      background:rgba(255,255,255,0.9);
      color:#111827;
    }

    .search-card {
      margin-top:22px;
      background: linear-gradient(135deg,rgba(255,255,255,0.98),rgba(240,249,255,0.98));
      border-radius:22px;
      padding:16px 18px 14px;
      box-shadow: var(--dt-shadow);
      border:1px solid rgba(148,163,184,0.4);
    }
    .search-title {
      font-size:12px;
      font-weight:700;
      text-transform:uppercase;
      letter-spacing:.12em;
      color:var(--dt-text-sub);
      margin-bottom:10px;
    }
    .search-sub {
      font-size:11px;
      color:var(--dt-text-sub);
      margin-bottom:12px;
    }
    .search-row {
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .search-field {
      flex:1;
      min-width:150px;
      background:#f9fafb;
      border-radius:999px;
      padding:4px 12px;
      border:1px solid #e5e7eb;
      display:flex;
      align-items:center;
      gap:6px;
    }
    .search-field span {
      font-size:11px;
      color:var(--dt-text-sub);
      white-space:nowrap;
    }
    .search-field input,
    .search-field select {
      border:none;
      background:transparent;
      outline:none;
      width:100%;
      font-size:13px;
    }
    .search-btn {
      padding:10px 20px;
      border-radius:999px;
      border:none;
      background:linear-gradient(135deg,#0b4ee6,#2563eb);
      color:#fff;
      font-weight:600;
      font-size:14px;
      cursor:pointer;
      white-space:nowrap;
      box-shadow:0 12px 26px rgba(37,99,235,0.5);
    }
    .search-btn:hover {
      filter:brightness(1.05);
      transform:translateY(-1px);
    }

    /* HERO RIGHT CARD */
    .hero-right {
      background: radial-gradient(circle at 0% 0%,#22d3ee 0,#0b4ee6 35%,#020617 100%);
      border-radius:26px;
      padding:20px 18px;
      color:#e5f0ff;
      box-shadow:0 26px 60px rgba(15,23,42,0.75);
      position:relative;
      overflow:hidden;
    }
    .hero-right::after{
      content:"";
      position:absolute;
      inset:-80px;
      background:radial-gradient(circle at 120% -20%,rgba(255,255,255,0.16),transparent 55%);
      pointer-events:none;
    }
    .hero-right-inner { position:relative; z-index:1; }
    .hero-right-title {
      font-size:18px;
      font-weight:600;
      margin-bottom:6px;
    }
    .hero-right-sub {
      font-size:13px;
      color:#c7e0ff;
      margin-bottom:12px;
    }
    .hero-right-line {
      font-size:12px;
      margin-top:4px;
    }
    .hero-right-pill {
      margin-top:14px;
      display:inline-flex;
      align-items:center;
      gap:6px;
      font-size:11px;
      padding:6px 10px;
      border-radius:999px;
      background:rgba(15,23,42,0.75);
      border:1px solid rgba(148,163,184,0.55);
    }

    /* SECTION WRAPPER */
    .section {
      max-width:1200px;
      margin:0 auto;
      padding:0 18px 32px;
    }
    .section-header {
      margin-top:26px;
      margin-bottom:10px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
    }
    .section-title {
      font-size:18px;
      font-weight:600;
    }
    .section-sub {
      font-size:12px;
      color:var(--dt-text-sub);
    }

    /* BRANDS GRID */
    .brands-grid {
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
      gap:12px;
    }
    .brand-item {
      background:#ffffff;
      border-radius:16px;
      padding:10px 12px;
      box-shadow:0 10px 26px rgba(148,163,184,0.3);
      border:1px solid rgba(148,163,184,0.45);
      display:flex;
      flex-direction:column;
      gap:4px;
      cursor:pointer;
      font-size:13px;
    }
    .brand-name { font-weight:600; }
    .brand-tag {
      font-size:11px;
      color:var(--dt-text-sub);
    }

    /* CAR GRID */
    .car-grid {
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
      gap:18px;
    }
    .car-card {
      background:#ffffff;
      border-radius:18px;
      overflow:hidden;
      box-shadow:0 16px 38px rgba(15,23,42,0.26);
      border:1px solid rgba(148,163,184,0.45);
      cursor:pointer;
      transition:transform .16s ease, box-shadow .16s ease;
    }
    .car-card:hover {
      transform:translateY(-4px);
      box-shadow:0 22px 55px rgba(15,23,42,0.36);
    }
    .car-thumb {
      width:100%;
      height:190px;
      object-fit:cover;
    }
    .car-body {
      padding:12px 14px 14px;
    }
    .car-title {
      font-size:15px;
      font-weight:600;
      color:#0f172a;
    }
    .car-meta {
      display:flex;
      justify-content:space-between;
      margin-top:6px;
      font-size:12px;
      color:var(--dt-text-sub);
    }
    .car-tagline {
      font-size:12px;
      margin-top:6px;
      color:var(--dt-text-sub);
    }
    .car-price-row {
      margin-top:10px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-size:13px;
    }
    .car-price {
      font-size:18px;
      font-weight:700;
      color:#16a34a;
    }
    .car-cta {
      font-size:11px;
      padding:6px 10px;
      border-radius:999px;
      background:var(--dt-primary-soft);
      color:var(--dt-primary);
    }

    .footer {
      border-top:1px solid rgba(148,163,184,0.4);
      padding:14px 18px 18px;
      font-size:11px;
      color:var(--dt-text-sub);
      text-align:center;
    }
  </style>
</head>
<body>

<!-- NAVBAR -->
<header class="navbar">
  <div class="nav-inner">
    <!-- Êï¥‰∏™ Logo ÂèØÁÇπÂáªËøîÂõûÈ¶ñÈ°µ -->
    <a href="/" class="nav-left">
      <div class="nav-logo">DT</div>
      <div class="nav-brand-text">
        <div class="nav-brand-title">DrivingTrust</div>
        <div class="nav-brand-sub">Safer C2C auto deals in BC</div>
      </div>
    </a>

    <nav class="nav-right">
      <a class="nav-link" href="/listing.html">Browse Cars</a>
      <a class="nav-link nav-link-primary" href="/sell.html">Sell My Car</a>
      <!-- ËøôÈáåÁõ¥Êé•ÊåáÂêë admin.html -->
      <a class="nav-link" href="/admin.html">Admin</a>
    </nav>
  </div>
</header>

<!-- HERO + SEARCH -->
<main class="hero-wrap">
  <section class="hero">
    <div class="hero-text">
      <h1>
        Buy & Sell Used Cars with
        <span class="hero-highlight">Real Trust</span>.
      </h1>
      <p>DrivingTrust Â∏Æ‰Ω†Á≠õÈÄâËΩ¶Ê∫ê„ÄÅÊî∂ÈõÜ‰ø°ÊÅØ„ÄÅÁªü‰∏ÄÂÆ°Ê†∏ÔºåËÆ©ÊôÆÈÄö‰∫∫‰πüËÉΩÂÉèËΩ¶ÂïÜ‰∏ÄÊ†∑ÂÆâÂøÉ‰π∞Âçñ‰∫åÊâãËΩ¶„ÄÇ</p>

      <div class="hero-badges">
        <div class="hero-badge">‚úÖ Êî∂ÈõÜÂçñÂÆ∂ÁúüÂÆûÂßìÂêçÁîµËØù</div>
        <div class="hero-badge">‚úÖ ÂÆåÊï¥ËΩ¶ËæÜ‰ø°ÊÅØ‰∏éÁÖßÁâá</div>
        <div class="hero-badge">‚úÖ ÂêéÂè∞‰∫∫Â∑•ÂÆ°Ê†∏ÊµÅÁ®ã</div>
      </div>

      <!-- QUICK SEARCH -->
      <div class="search-card">
        <div class="search-title">QUICK SEARCH ¬∑ Âø´ÈÄüÁ≠õÈÄâËΩ¶Ê∫ê</div>
        <div class="search-sub">Keyword / ÂìÅÁâåÂÖ≥ÈîÆËØç ¬∑ ‰πüÂèØ‰ª•Á≤æÁ°ÆÈÄâÊã© Brand + Model</div>

        <div class="search-row">
          <div class="search-field">
            <span>Keyword</span>
            <input id="search-input" placeholder="Brand / model / city / seller" />
          </div>

          <div class="search-field">
            <span>Brand</span>
            <select id="brand-filter">
              <option value="all">All brands</option>
              <!-- JS Â°´ÂÖÖÊâÄÊúâÂìÅÁâå -->
            </select>
          </div>

          <div class="search-field">
            <span>Model</span>
            <select id="model-filter">
              <option value="all">All models</option>
              <!-- JS ÊåâÂìÅÁâåËÅîÂä® -->
            </select>
          </div>
        </div>

        <div class="search-row" style="margin-top:8px;">
          <div class="search-field">
            <span>City</span>
            <select id="city-filter">
              <option value="all">All</option>
              <option value="Richmond">Richmond</option>
              <option value="Vancouver">Vancouver</option>
              <option value="Burnaby">Burnaby</option>
              <option value="Surrey">Surrey</option>
            </select>
          </div>

          <div class="search-field">
            <span>Max Price</span>
            <select id="price-filter">
              <option value="all">Any</option>
              <option value="15000">‚â§ 15k</option>
              <option value="25000">‚â§ 25k</option>
              <option value="35000">‚â§ 35k</option>
              <option value="50000">‚â§ 50k</option>
            </select>
          </div>

          <button class="search-btn" type="button" onclick="applyHomeFilters()">
            Search
          </button>
        </div>
      </div>
    </div>

    <!-- Âè≥‰æß‰ªãÁªçÂç°Áâá -->
    <aside class="hero-right">
      <div class="hero-right-inner">
        <div class="hero-right-title">DrivingTrust Checkpoints</div>
        <div class="hero-right-sub">What we record for each listing</div>
        <div class="hero-right-line">‚Ä¢ Seller name & phone</div>
        <div class="hero-right-line">‚Ä¢ City, mileage, price expectation</div>
        <div class="hero-right-line">‚Ä¢ Accident history & inspection willingness</div>
        <div class="hero-right-line">‚Ä¢ Multiple real photos of the vehicle</div>
        <div class="hero-right-pill">
          üîí Data hosted on Supabase ¬∑ encrypted at rest
        </div>
      </div>
    </aside>
  </section>
</main>

<!-- POPULAR BRANDS -->
<section class="section">
  <div class="section-header">
    <div>
      <div class="section-title">Popular Brands ¬∑ ÁÉ≠Èó®ÂìÅÁâå</div>
      <div class="section-sub">ÁÇπÂáªÂìÅÁâåÂø´ÈÄüÁ≠õÈÄâÂêåÁ±ªËΩ¶Ê∫ê</div>
    </div>
  </div>

  <div class="brands-grid" id="popular-brands">
    <!-- JS Ê†πÊçÆÂìÅÁâåË°®Ëá™Âä®ÁîüÊàê -->
  </div>
</section>

<!-- LATEST LISTINGS -->
<section class="section">
  <div class="section-header">
    <div>
      <div class="section-title">Latest Listings ¬∑ ÊúÄÊñ∞ËΩ¶Ê∫ê</div>
      <div class="section-sub" id="result-count-text">Loading...</div>
    </div>
    <a href="/listing.html" class="section-sub" style="cursor:pointer;">View all &raquo;</a>
  </div>

  <div id="home-car-grid" class="car-grid"></div>
</section>

<footer class="footer">
  DrivingTrust ¬∑ Vancouver based C2C used car helper ¬∑ Built with Supabase & Vercel
</footer>

<script>
  // ===== ÂìÅÁâå ‚Üí ËΩ¶ÂûãÊò†Â∞ÑÔºàÁ§∫‰æãÔºåÂ∏∏ËßÅËΩ¶ÂûãÔºåÂèØ‰ª•ÂêéÊúüË°•ÂÖÖÔºâ =====
  const BRAND_MODELS = {
    "Toyota": ["Corolla", "Camry", "RAV4", "Highlander", "Tacoma", "Sienna", "4Runner", "Prius"],
    "Lexus": ["IS", "ES", "GS", "RX", "NX", "UX", "GX", "LX"],
    "Honda": ["Civic", "Accord", "CR-V", "HR-V", "Pilot", "Odyssey", "Fit"],
    "Acura": ["ILX", "TLX", "RLX", "RDX", "MDX"],
    "Nissan": ["Sentra", "Altima", "Maxima", "Rogue", "Murano", "Pathfinder", "Leaf"],
    "Infiniti": ["Q50", "Q60", "QX50", "QX60", "QX80"],
    "Subaru": ["Impreza", "Legacy", "Outback", "Forester", "Crosstrek", "WRX"],
    "Mazda": ["Mazda3", "Mazda6", "CX-3", "CX-5", "CX-9"],
    "Mitsubishi": ["Lancer", "Outlander", "RVR", "Mirage"],
    "Hyundai": ["Elantra", "Sonata", "Tucson", "Santa Fe", "Kona", "Palisade"],
    "Kia": ["Rio", "Forte", "Soul", "Sportage", "Sorento", "Telluride"],
    "Genesis": ["G70", "G80", "G90", "GV70", "GV80"],
    "Ford": ["Focus", "Fusion", "Mustang", "Escape", "Explorer", "F-150"],
    "Lincoln": ["MKZ", "Nautilus", "Aviator", "Navigator"],
    "Chevrolet": ["Cruze", "Malibu", "Equinox", "Traverse", "Silverado"],
    "GMC": ["Terrain", "Acadia", "Yukon", "Sierra"],
    "Cadillac": ["ATS", "CTS", "XT4", "XT5", "Escalade"],
    "Buick": ["Verano", "Regal", "Enclave", "Encore"],
    "Chrysler": ["300", "Pacifica"],
    "Dodge": ["Charger", "Challenger", "Journey", "Grand Caravan"],
    "RAM": ["1500", "2500", "3500"],
    "Jeep": ["Wrangler", "Cherokee", "Grand Cherokee", "Compass", "Gladiator"],
    "Tesla": ["Model S", "Model 3", "Model X", "Model Y"],
    "Mercedes-Benz": ["A-Class", "C-Class", "E-Class", "S-Class", "GLA", "GLC", "GLE", "GLS"],
    "BMW": ["1 Series", "2 Series", "3 Series", "4 Series", "5 Series", "X1", "X3", "X5"],
    "MINI": ["3 Door", "5 Door", "Countryman", "Clubman"],
    "Audi": ["A3", "A4", "A5", "A6", "Q3", "Q5", "Q7"],
    "Porsche": ["911", "Cayman", "Boxster", "Cayenne", "Macan", "Taycan"],
    "Volkswagen": ["Golf", "Jetta", "Passat", "Tiguan", "Atlas"],
    "Land Rover": ["Discovery", "Defender", "LR4", "Freelander"],
    "Range Rover": ["Evoque", "Velar", "Sport", "Autobiography"],
    "Jaguar": ["XE", "XF", "F-PACE", "E-PACE", "F-TYPE"],
    "Bentley": ["Continental GT", "Flying Spur", "Bentayga"],
    "Rolls-Royce": ["Ghost", "Phantom", "Wraith", "Cullinan"],
    "Lotus": ["Elise", "Exige", "Evora"],
    "McLaren": ["540C", "570S", "650S", "720S"],
    "Aston Martin": ["Vantage", "DB11", "DBS", "Rapide"],
    "Ferrari": ["488", "F8", "Portofino", "Roma"],
    "Lamborghini": ["Huracan", "Aventador", "Urus"],
    "Maserati": ["Ghibli", "Quattroporte", "Levante"],
    "Alfa Romeo": ["Giulia", "Stelvio", "4C"],
    "Fiat": ["500", "500X"],
    "Volvo": ["S60", "S90", "V60", "XC40", "XC60", "XC90"],
    "Polestar": ["1", "2", "3"],
    "Koenigsegg": ["Jesko", "Regera"],
    "Lucid": ["Air"],
    "Rivian": ["R1T", "R1S"]
  };

  const ALL_BRANDS = [
    "Toyota","Lexus","Honda","Acura","Nissan","Infiniti","Subaru","Mazda","Mitsubishi",
    "Hyundai","Kia","Genesis","Ford","Lincoln","Chevrolet","GMC","Cadillac","Buick",
    "Chrysler","Dodge","RAM","Jeep","Tesla","Mercedes-Benz","BMW","MINI","Audi",
    "Porsche","Volkswagen","Land Rover","Range Rover","Jaguar","Bentley","Rolls-Royce",
    "Lotus","McLaren","Aston Martin","Ferrari","Lamborghini","Maserati","Alfa Romeo",
    "Fiat","Volvo","Polestar","Koenigsegg","Lucid","Rivian"
  ];

  let HOME_ALL_CARS = [];

  // ÂàùÂßãÂåñ Brand ‰∏ãÊãâ + Popular Brands
  function initBrandUI() {
    const brandSelect = document.getElementById("brand-filter");
    const modelSelect = document.getElementById("model-filter");
    const popularBox = document.getElementById("popular-brands");

    // Brand ‰∏ãÊãâ
    ALL_BRANDS.forEach(b => {
      const opt = document.createElement("option");
      opt.value = b;
      opt.textContent = b;
      brandSelect.appendChild(opt);
    });

    // ÈªòËÆ§ Model
    updateModelOptions("all");

    // Brand ÊîπÂèòÊó∂ËÅîÂä® Model
    brandSelect.addEventListener("change", () => {
      updateModelOptions(brandSelect.value);
    });

    // Popular brand cards
    popularBox.innerHTML = "";
    const hotBrands = ["Toyota","Honda","BMW","Mercedes-Benz","Audi","Lexus","Tesla","Volkswagen"];
    hotBrands.forEach(b => {
      const card = document.createElement("div");
      card.className = "brand-item";
      card.onclick = () => {
        brandSelect.value = b;
        updateModelOptions(b);
        applyHomeFilters();
      };
      card.innerHTML = `
        <div class="brand-name">${b}</div>
        <div class="brand-tag">Click to see ${b} listings</div>
      `;
      popularBox.appendChild(card);
    });
  }

  function updateModelOptions(brand) {
    const modelSelect = document.getElementById("model-filter");
    modelSelect.innerHTML = "";

    const first = document.createElement("option");
    first.value = "all";
    first.textContent = "All models";
    modelSelect.appendChild(first);

    if (!brand || brand === "all") {
      return;
    }
    const models = BRAND_MODELS[brand] || [];
    models.forEach(m => {
      const opt = document.createElement("option");
      opt.value = m;
      opt.textContent = m;
      modelSelect.appendChild(opt);
    });
  }

  // ===== Êï∞ÊçÆÂä†ËΩΩ & Ê∏≤Êüì =====
  async function loadHomeCars() {
    try {
      const res = await fetch("/api/getCars");
      const data = await res.json();
      HOME_ALL_CARS = Array.isArray(data) ? data : [];
      renderHomeCars(HOME_ALL_CARS.slice(0, 12));
    } catch (e) {
      console.error(e);
      document.getElementById("home-car-grid").innerHTML =
        "<div>Failed to load listings.</div>";
    }
  }

  function renderHomeCars(list) {
    const box = document.getElementById("home-car-grid");
    const countText = document.getElementById("result-count-text");
    box.innerHTML = "";

    countText.textContent = list.length
      ? `Showing ${list.length} cars ¬∑ ÂÖ± ${list.length} Êù°ËΩ¶Ê∫ê`
      : "No cars found ¬∑ ÊöÇÊó†ËΩ¶Ê∫ê";

    list.forEach((car) => {
      const img =
        (car.images && car.images[0]) ||
        "https://placehold.co/640x400?text=No+Image";

      const card = document.createElement("article");
      card.className = "car-card";
      card.onclick = () =>
        (window.location.href = "/car.html?id=" + encodeURIComponent(car.id));

      card.innerHTML = `
        <img class="car-thumb" src="${img}" alt="Car image" />
        <div class="car-body">
          <div class="car-title">${car.car || "Unknown vehicle"}</div>
          <div class="car-meta">
            <span>${car.city || "Unknown city"}</span>
            <span>${car.mileage ? Number(car.mileage).toLocaleString() + " km" : "-"}</span>
          </div>
          <div class="car-tagline">
            Seller: ${car.name || "-"} ¬∑ ${
              car.accident === "Yes" ? "Accident history" : "No major accident"
            }
          </div>
          <div class="car-price-row">
            <div class="car-price">$${car.price || "‚Äî"}</div>
            <div class="car-cta">View details</div>
          </div>
        </div>
      `;
      box.appendChild(card);
    });
  }

  // ===== Quick Search ÈÄªËæëÔºàKeyword + Brand + Model + City + PriceÔºâ =====
  function applyHomeFilters() {
    const kw = document.getElementById("search-input").value.trim().toLowerCase();
    const brand = document.getElementById("brand-filter").value;
    const model = document.getElementById("model-filter").value;
    const city = document.getElementById("city-filter").value;
    const maxPrice = document.getElementById("price-filter").value;

    let list = HOME_ALL_CARS.slice();

    list = list.filter((car) => {
      const text =
        (car.car || "") +
        " " +
        (car.city || "") +
        " " +
        (car.name || "") +
        " " +
        (car.phone || "");

      const matchKw = !kw || text.toLowerCase().includes(kw);

      const matchCity = city === "all" || car.city === city;

      const matchBrand =
        brand === "all" ||
        (car.car || "").toLowerCase().includes(brand.toLowerCase());

      let matchModel = true;
      if (brand !== "all" && model !== "all") {
        matchModel = (car.car || "").toLowerCase().includes(model.toLowerCase());
      }

      const matchPrice =
        maxPrice === "all" ||
        Number(car.price || 0) <= Number(maxPrice);

      return matchKw && matchCity && matchBrand && matchModel && matchPrice;
    });

    renderHomeCars(list.slice(0, 24));
  }

  // ÂàùÂßãÂåñ
  initBrandUI();
  loadHomeCars();
</script>
</body>
</html>
