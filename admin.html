<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    .car-card { border:1px solid #ccc; padding:10px; margin-bottom:10px; border-radius:5px; }
    .btn { padding:5px 10px; cursor:pointer; margin-right:5px; }
    .approve { background:#4CAF50; color:white; }
    .reject { background:#f44336; color:white; }
    .delete { background:#555; color:white; }
  </style>
</head>
<body>

<h1>Admin Dashboard</h1>

<div id="list"></div>

<script>
async function loadCars() {
  const res = await fetch("/api/getCars");
  const data = await res.json();
  const container = document.getElementById("list");

  data.forEach(car => {
    const div = document.createElement("div");
    div.className = "car-card";
    div.innerHTML = `
      <b>${car.car}</b><br>
      ${car.city} / ${car.mileage} km / ${car.price}<br>
      Status: <b>${car.status || "pending"}</b><br><br>

      <button class="btn approve" onclick="updateStatus(${car.id}, 'approved')">Approve</button>
      <button class="btn reject" onclick="updateStatus(${car.id}, 'rejected')">Reject</button>
      <button class="btn delete" onclick="deleteCar(${car.id})">Delete</button>
    `;
    container.appendChild(div);
  });
}

async function updateStatus(id, status) {
  await fetch("/api/updateCar", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ id, status })
  });
  location.reload();
}

async function deleteCar(id) {
  if (!confirm("Are you sure?")) return;
  await fetch("/api/deleteCar", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ id })
  });
  location.reload();
}

loadCars();
</script>

</body>
</html>
